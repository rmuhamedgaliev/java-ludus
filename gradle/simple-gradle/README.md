# Simple gradle

## Система сборки Gradle


Для сборки проекта используется [Gradle](gradle.org). Gradle является своего рода альтерантивой [Maven](http://maven.apache.org), [SBT](https://www.scala-sbt.org), [Bazel](https://bazel.build), [make](https://www.gnu.org/software/make/manual/make.html). Для подключения библиотек Gradle использует [maven репозитории](https://docs.gradle.org/current/userguide/dependency_management_for_java_projects.html) и [ant подход](https://docs.gradle.org/current/userguide/declaring_dependencies.html) с локальными зависимостями.  

Проект инициализирован при помощи команды 

```bash
gradle init
```

Данный скрипт генерирует проект с [application](https://docs.gradle.org/current/userguide/application_plugin.html).

```kotlin
/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.7/userguide/building_java_projects.html
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    application
}

repositories {
    // Use JCenter for resolving dependencies.
    jcenter()
}

dependencies {
    // Use JUnit Jupiter API for testing.
    testImplementation("org.junit.jupiter:junit-jupiter-api:5.6.2")

    // Use JUnit Jupiter Engine for testing.
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine")

    // This dependency is used by the application.
    implementation("com.google.guava:guava:29.0-jre")
}

application {
    // Define the main class for the application.
    mainClass.set("dev.rmuhamedgaliev.App")
}

tasks.test {
    // Use junit platform for unit tests.
    useJUnitPlatform()
}
```

## Зависимости

| Название | Назначение | 
|:---|---:|
| implementation | extends compile. Implementation only dependencies. |
| compileOnly | Compile time only dependencies, not used at runtime. |
| compileClasspath | extends compile, compileOnly, implementation. Compile classpath, used when compiling source. Used by task compileJava. |
| annotationProcessor | Annotation processors used during compilation. |
| runtimeOnly | Runtime only dependencies. |
| runtimeClasspath | extends runtimeOnly, runtime, implementation. Runtime classpath contains elements of the implementation, as well as runtime only elements. |
| testImplementation | extends testCompile, implementation. Implementation only dependencies for tests. |
| testCompileOnly | Additional dependencies only for compiling tests, not used at runtime. |
| testCompileClasspath | extends testCompile, testCompileOnly, testImplementation. Test compile classpath, used when compiling test sources. Used by task compileTestJava. |
| testRuntimeOnly | extends runtimeOnly. Runtime only dependencies for running tests. |
| testRuntimeClasspath | extends testRuntimeOnly, testRuntime, testImplementation. Runtime classpath for running tests. Used by task test. |
| archives | Artifacts (e.g. jars) produced by this project. Used by task uploadArchives. |
| default | extends runtimeClasspath. The default configuration used by a project dependency on this project. Contains the artifacts and dependencies required by this project at runtime. |

На диаграмме ниже визуально отображно для чего и как используются разные области зависимостей.

### Основные зависимости

![main](https://docs.gradle.org/current/userguide/img/java-main-configurations.png) 

### Тестовые зависимости

![test](https://docs.gradle.org/current/userguide/img/java-test-configurations.png)

## Задачи

Данная конфигурация предоставляет возможность сборки простого консольного Java приложения и возможность создать архив со всеми необходимыми для запуска скриптами. 
Для работы с приложением используется утилита `gradle` и все задачи для выполенния можно посомтреть при помощи команды `gradle tasks`.

```bash
> Task :tasks

------------------------------------------------------------
Tasks runnable from root project
------------------------------------------------------------

Application tasks
-----------------
app:run - Runs this project as a JVM application

Build tasks
-----------
app:assemble - Assembles the outputs of this project.
app:build - Assembles and tests this project.
app:buildDependents - Assembles and tests this project and all projects that depend on it.
app:buildNeeded - Assembles and tests this project and all projects it depends on.
app:classes - Assembles main classes.
app:clean - Deletes the build directory.
app:jar - Assembles a jar archive containing the main classes.
app:testClasses - Assembles test classes.

Build Setup tasks
-----------------
init - Initializes a new Gradle build.
wrapper - Generates Gradle wrapper files.

Distribution tasks
------------------
app:assembleDist - Assembles the main distributions
app:distTar - Bundles the project as a distribution.
app:distZip - Bundles the project as a distribution.
app:installDist - Installs the project as a distribution as-is.

Documentation tasks
-------------------
app:javadoc - Generates Javadoc API documentation for the main source code.

Help tasks
----------
buildEnvironment - Displays all buildscript dependencies declared in root project 'simple-gradle'.
app:buildEnvironment - Displays all buildscript dependencies declared in project ':app'.
components - Displays the components produced by root project 'simple-gradle'. [incubating]
app:components - Displays the components produced by project ':app'. [incubating]
dependencies - Displays all dependencies declared in root project 'simple-gradle'.
app:dependencies - Displays all dependencies declared in project ':app'.
dependencyInsight - Displays the insight into a specific dependency in root project 'simple-gradle'.
app:dependencyInsight - Displays the insight into a specific dependency in project ':app'.
dependentComponents - Displays the dependent components of components in root project 'simple-gradle'. [incubating]
app:dependentComponents - Displays the dependent components of components in project ':app'. [incubating]
help - Displays a help message.
app:help - Displays a help message.
app:kotlinDslAccessorsReport - Prints the Kotlin code for accessing the currently available project extensions and conventions.
model - Displays the configuration model of root project 'simple-gradle'. [incubating]
app:model - Displays the configuration model of project ':app'. [incubating]
outgoingVariants - Displays the outgoing variants of root project 'simple-gradle'.
app:outgoingVariants - Displays the outgoing variants of project ':app'.
projects - Displays the sub-projects of root project 'simple-gradle'.
app:projects - Displays the sub-projects of project ':app'.
properties - Displays the properties of root project 'simple-gradle'.
app:properties - Displays the properties of project ':app'.
tasks - Displays the tasks runnable from root project 'simple-gradle' (some of the displayed tasks may belong to subprojects).
app:tasks - Displays the tasks runnable from project ':app'.

Verification tasks
------------------
app:check - Runs all checks.
app:test - Runs the unit tests.

Other tasks
-----------
app:compileJava - Compiles main Java source.
app:compileTestJava - Compiles test Java source.
prepareKotlinBuildScriptModel
app:processResources - Processes main resources.
app:processTestResources - Processes test resources.
app:startScripts - Creates OS specific scripts to run the project as a JVM application.

BUILD SUCCESSFUL in 5s
1 actionable task: 1 executed
```

Для запуска `main` функции вашего приложения необходимо в терминале написать `./gradlew app:run`

```bash
> Task :app:run
Hello World!

BUILD SUCCESSFUL in 4s
2 actionable tasks: 2 executed
```